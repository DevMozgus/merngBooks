{"ast":null,"code":"var _jsxFileName = \"/home/niko/Documents/web/openstack/bookExercise/frontend/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Authors from './components/Authors';\nimport Books from './components/Books';\nimport Recommended from './components/Recommended';\nimport NewBook from './components/NewBook';\nimport LoginForm from './components/LoginForm';\nimport { useApolloClient, useSubscription } from '@apollo/client';\nimport { BOOK_ADDED } from './mutations';\n\nconst App = () => {\n  const [page, setPage] = useState('authors');\n  const [error, setError] = useState(null);\n  const [token, setToken] = useState(null);\n  const client = useApolloClient();\n  useSubscription(BOOK_ADDED, {\n    onSubscriptionData: ({\n      subscriptionData\n    }) => {\n      const addedBook = subscriptionData.data.bookAdded;\n      console.log(addedBook.title, \" has been added\");\n    }\n  });\n  useEffect(() => {\n    const storedToken = localStorage.getItem(\"current-user-token\");\n    if (storedToken) setToken(storedToken);\n  }, []);\n\n  const handleLogout = () => {\n    setToken(null);\n    localStorage.clear();\n    client.resetStore();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Notify, {\n    error: error,\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, !token ? /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('login'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, \"login\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleLogout(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, \"log out\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('add'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, \"add book\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('recommended'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }, \"recommended\")), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('authors'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, \"authors\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('books'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"books\")), /*#__PURE__*/React.createElement(LoginForm, {\n    setError: setError,\n    setToken: setToken,\n    show: page === \"login\",\n    setPage: setPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Authors, {\n    show: page === 'authors',\n    setError: setError,\n    token: token,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Books, {\n    show: page === 'books',\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Recommended, {\n    show: page === 'recommended',\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(NewBook, {\n    show: page === 'add',\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst Notify = ({\n  error,\n  setError\n}) => {\n  if (!error) return null;\n  setTimeout(() => setError(null), 3000);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, error);\n};\n\nexport default App;","map":{"version":3,"sources":["/home/niko/Documents/web/openstack/bookExercise/frontend/src/App.js"],"names":["React","useState","useEffect","Authors","Books","Recommended","NewBook","LoginForm","useApolloClient","useSubscription","BOOK_ADDED","App","page","setPage","error","setError","token","setToken","client","onSubscriptionData","subscriptionData","addedBook","data","bookAdded","console","log","title","storedToken","localStorage","getItem","handleLogout","clear","resetStore","Notify","setTimeout","color"],"mappings":"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","sourcesContent":["\nimport React, { useState, useEffect } from 'react'\nimport Authors from './components/Authors'\nimport Books from './components/Books'\nimport Recommended from './components/Recommended'\nimport NewBook from './components/NewBook'\nimport LoginForm from './components/LoginForm'\nimport { useApolloClient, useSubscription } from '@apollo/client';\nimport { BOOK_ADDED } from './mutations'\n\nconst App = () => {\n  const [page, setPage] = useState('authors')\n  const [error, setError] = useState(null)\n  const [token, setToken] = useState(null)\n  const client = useApolloClient()\n\n  useSubscription(BOOK_ADDED, {\n    onSubscriptionData: ({subscriptionData}) => {\n      const addedBook = subscriptionData.data.bookAdded\n      console.log(addedBook.title, \" has been added\")\n    }\n  })\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem(\"current-user-token\")\n    if (storedToken) setToken(storedToken)\n  }, [])\n\n  const handleLogout = () => {\n    setToken(null)\n    localStorage.clear()\n    client.resetStore()\n  }\n\n  return (\n    <div>\n      <Notify error={error} setError={setError} />  \n      <div>\n        { \n        !token ?\n        <button onClick={() => setPage('login')}>login</button>\n        : \n        <>\n        <button onClick={() => handleLogout()} >log out</button>\n        <button onClick={() => setPage('add')}>add book</button>\n        <button onClick={() => setPage('recommended')}>recommended</button>       \n        </>\n        }\n        <button onClick={() => setPage('authors')}>authors</button>\n        <button onClick={() => setPage('books')}>books</button>       \n      </div>\n\n      <LoginForm \n        setError={setError} \n        setToken={setToken} \n        show={page === \"login\"}\n        setPage={setPage}\n      />\n\n      <Authors\n        show={page === 'authors'}\n        setError={setError}\n        token={token}\n      />\n\n      <Books\n        show={page === 'books'}\n        setError={setError}\n      />\n\n      <Recommended\n        show={page === 'recommended'}\n        setError={setError}\n      />\n\n      <NewBook\n        show={page === 'add'}\n        setError={setError}\n      />\n\n    </div>\n  )\n}\n\nconst Notify = ({error, setError}) => {  \n  if (!error) return null   \n\n  setTimeout(() => setError(null), 3000)\n  return (    \n    <div style={{color: 'red'}}>    \n    {error}    \n    </div>  \n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}