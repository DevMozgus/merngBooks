{"ast":null,"code":"var _jsxFileName = \"/home/niko/Documents/web/openstack/bookExercise/frontend/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Authors from './components/Authors';\nimport Books from './components/Books';\nimport NewBook from './components/NewBook';\nimport LoginForm from './components/LoginForm';\nimport { useApolloClient } from '@apollo/client';\n\nconst App = () => {\n  const [page, setPage] = useState('authors');\n  const [error, setError] = useState(null);\n  const [token, setToken] = useState(null);\n  const client = useApolloClient();\n  useEffect(() => {\n    const userToken = localStorage.getItem(\"current-user-token\");\n    if (userToken) setToken(userToken);\n  }, []);\n\n  if (!token) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Notify, {\n      error: error,\n      setError: setError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(LoginForm, {\n      setError: setError,\n      setToken: setToken,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 7\n      }\n    }));\n  }\n\n  const handleLogout = () => {\n    setToken(null);\n    localStorage.clear();\n    client.resetStore();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleLogout(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, \"log out\"), /*#__PURE__*/React.createElement(Notify, {\n    error: error,\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('authors'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, \"authors\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('books'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, \"books\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setPage('add'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, \"add book\")), /*#__PURE__*/React.createElement(Authors, {\n    show: page === 'authors',\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Books, {\n    show: page === 'books',\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(NewBook, {\n    show: page === 'add',\n    setError: setError,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst Notify = ({\n  error,\n  setError\n}) => {\n  if (!error) return null;\n  setTimeout(() => setError(null), 3000);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, error);\n};\n\nexport default App;","map":{"version":3,"sources":["/home/niko/Documents/web/openstack/bookExercise/frontend/src/App.js"],"names":["React","useState","useEffect","Authors","Books","NewBook","LoginForm","useApolloClient","App","page","setPage","error","setError","token","setToken","client","userToken","localStorage","getItem","handleLogout","clear","resetStore","Notify","setTimeout","color"],"mappings":"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","sourcesContent":["\nimport React, { useState, useEffect } from 'react'\nimport Authors from './components/Authors'\nimport Books from './components/Books'\nimport NewBook from './components/NewBook'\nimport LoginForm from './components/LoginForm'\nimport { useApolloClient } from '@apollo/client';\n\nconst App = () => {\n  const [page, setPage] = useState('authors')\n  const [error, setError] = useState(null)\n  const [token, setToken] = useState(null)\n  const client = useApolloClient()\n\n  useEffect(() => {\n    const userToken = localStorage.getItem(\"current-user-token\")\n    if (userToken) setToken(userToken)\n  }, [])\n\n  if (!token) {\n    return (\n      <div>\n      <Notify error={error} setError={setError} />  \n      <LoginForm setError={setError} setToken={setToken} />\n      </div>\n    )\n  }\n\n  const handleLogout = () => {\n    setToken(null)\n    localStorage.clear()\n    client.resetStore()\n  }\n\n  return (\n    <div>\n      <button onClick={() => handleLogout()} >log out</button>\n      <Notify error={error} setError={setError} />  \n      <div>\n        <button onClick={() => setPage('authors')}>authors</button>\n        <button onClick={() => setPage('books')}>books</button>\n        <button onClick={() => setPage('add')}>add book</button>\n      </div>\n\n      <Authors\n        show={page === 'authors'}\n        setError={setError}\n      />\n\n      <Books\n        show={page === 'books'}\n        setError={setError}\n      />\n\n      <NewBook\n        show={page === 'add'}\n        setError={setError}\n      />\n\n    </div>\n  )\n}\n\nconst Notify = ({error, setError}) => {  \n  if (!error) return null   \n\n  setTimeout(() => setError(null), 3000)\n  return (    \n    <div style={{color: 'red'}}>    \n    {error}    \n    </div>  \n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}